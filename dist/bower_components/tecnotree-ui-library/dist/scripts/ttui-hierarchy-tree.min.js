/*! TT-UI Lib 0.6.24.19 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ttui-hierarchy-tree"),function(a,b,c){"use strict";function d(a){this.scope=a,a.$nodesScope=null,a.$type="Tree",a.$callbacks=null,a.$rootNode=null,a.$treeFilter=null,a.$options=null,a.isEmpty=function(){return a.$nodesScope&&a.$nodesScope.$modelValue&&0===a.$nodesScope.$modelValue.length};var b=function(c){var d,e,f=c.childNodes();for(d=0;d<f.length;d++)f[d].unSelect(),(e=f[d].$childNodesScope)&&b(e);a.$rootNode&&a.$rootNode.unSelect()},c=function(a,b){var d,e,f=a.childNodes();for(d=0;d<f.length;d++)b?f[d].collapse():f[d].expand(),(e=f[d].$childNodesScope)&&c(e,b)};a.clearAll=function(){b(a.$nodesScope)},a.collapseAll=function(){c(a.$nodesScope,!0)},a.expandAll=function(){c(a.$nodesScope,!1)},a.$on("hierarchy-tree-collapse-all",function(){a.collapseAll()}),a.$on("hierarchy-tree-expand-all",function(){a.expandAll()})}function e(a,c,d){function e(a){var b,c,d=0,f=a.childNodes();for(b=0;b<f.length;b++)(c=f[b].$childNodesScope)&&c.childNodesCount()>0&&(d=1,e(c));h+=d}function f(a){var c=1;return b.forEach(a.nodes,function(a){var b=f(a);c+=b}),c}this.scope=a,a.$element=c,a.$modelValue=null,a.$parentNodeScope=null,a.$childNodesScope=null,a.$parentNodesScope=null,a.$treeScope=null,a.$type="TreeNode",a.$$apply=!1,a.collapsed=!1,a.selected=!1,a.hovered=!1,a.iconHovered=!1,a.init=function(b){var d=b[0];a.$treeScope=b[1]?b[1].scope:null,a.$parentNodeScope=d.scope.$nodeScope,null!==d.scope.$modelValue?(a.$modelValue=d.scope.$modelValue[a.$index],a.$modelValue&&(a.selected=a.$modelValue.selected,a.collapsed=a.$modelValue.collapsed)):(a.$treeScope.$rootNode=a,a.$modelValue=null),a.$parentNodesScope=d.scope,d.initSubNode(a),c.on("$destroy",function(){d.destroySubNode(a)})},a.index=function(){return a.$parentNodesScope.$modelValue.indexOf(a.$modelValue)},a.isSibling=function(c){return b.equals(a.$parentNodesScope,c.$parentNodesScope)},a.isChild=function(b){var c=a.childNodes();return c&&c.indexOf(b)>-1},a.root=function(){return!0!==a.$treeScope.$options.showRoot&&null===a.$treeScope.$rootNode},a.prev=function(){var b=a.index();return b>0?a.siblings()[b-1]:null},a.siblings=function(){return a.$parentNodesScope.childNodes()},a.childNodesCount=function(){return a.childNodes()?a.childNodes().length:0},a.hasChild=function(){return a.childNodesCount()>0},a.childNodes=function(){return a.$childNodesScope&&a.$childNodesScope.$modelValue?a.$childNodesScope.childNodes():null},a.removeNode=function(){return a.remove()};var g=function(){var b=a.prev();b?(b.selected=!0,b.$modelValue.selected=b.selected):a.$nodeScope?(b=a.$nodeScope,a.$nodeScope.selected=!0,a.$nodeScope.$modelValue.selected=!0):(b=a.$treeScope.$rootNode,a.$treeScope.$rootNode.selected=!0),a.$treeScope.$callbacks.selectedAction(b)};a.remove=function(){return a.$treeScope.$options.selectPrevious&&g(),a.$treeScope.$callbacks.removedAction(a),a.$parentNodesScope.removeNode(a)},a.removeWithTimeout=function(){a.selected=!1,d(function(){a.removeNode()},70)},a.toggle=function(){a.collapsed=!a.collapsed},a.collapse=function(){a.collapsed=!0},a.expand=function(){a.collapsed=!1},a.hover=function(b){a.hovered=b},a.iconHover=function(b){a.iconHovered=b},a.readonly=function(){return a.$treeScope.$options.readonly},a.visible=function(b){return!(a.$treeScope.$treeFilter&&a.$treeScope.$treeFilter.length>0)||b.title.lastIndexOf(a.$treeScope.$treeFilter)>=0},a.unSelect=function(){a.selected=!1,a.$modelValue&&(a.$modelValue.selected=!1)},a.selectItem=function(){a.$treeScope&&a.$treeScope.clearAll(),a.selected=!0,a.$modelValue&&(a.$modelValue.selected=a.selected),a.expand(),a.$treeScope.$callbacks.selectedAction(a)},a.selectRoot=function(){a.$treeScope&&a.$treeScope.clearAll(),a.selected=!0,a.$treeScope.$callbacks.rootSelectedAction(a)},a.newSubItem=function(b,c){a.$treeScope.$callbacks.newSubItemAction(a,c)},a.footerButton=function(b){a.$treeScope.$callbacks.footerButtonAction(b)},a.maxDepth=function(){var b=parseInt(a.$treeScope.$options.maxDepth,10);return 0===b||a.depth()<b},a.depth=function(){var b=a.$parentNodeScope;return b?b.depth()+1:1};var h=0;a.maxSubDepth=function(){return h=0,a.$childNodesScope&&e(a.$childNodesScope),h},a.getIconClasses=function(){var b="glyphicon glyphicon-ttui ";return b=a.iconHovered?b.concat("glyphicon-chevron-circle-right-black "):b.concat("glyphicon-chevron-circle-right "),a.collapsed||a.iconHovered||(b=b.concat("animate ")),a.collapsed&&a.iconHovered&&(b=b.concat("animate-back ")),b},a.getNodeContentClasses=function(){var b="tree-node-content ";return a.selected&&(b=b.concat("selected ")),a.hasChild()||(b=b.concat("no-children ")),a.hovered&&(b=b.concat("hover ")),b},a.dropCallback=function(b,c,d){return a.expand(),d},a.dragstartCallback=function(b){var c=b.currentTarget.getElementsByTagName("input")[0].cloneNode(!0),d=document.createElement("div");if(a.hasChild()){var e=b.currentTarget.getElementsByClassName("glyphicon")[0].cloneNode(!0);d.appendChild(e)}if(d.appendChild(c),d.style.position="absolute",d.style.top="0px",d.style.right="0px",d.id="draggingImage",a.hasChild()){var g=document.createElement("div");g.innerText="("+f(a.$modelValue)+" items)",g.id="ghostCount",d.appendChild(g)}document.body.appendChild(d),b.dataTransfer.setDragImage(d,0,0),b.currentTarget.parentElement.style.opacity=.5,a.hover(!1)},a.dragendCallback=function(a){a.currentTarget.parentElement.style.opacity=1,document.body.removeChild(document.getElementById("draggingImage"))}}function f(a){this.scope=a,a.$modelValue=null,a.$nodeScope=null,a.$treeScope=null,a.$type="TreeNodes",a.$nodesMap={},this.initSubNode=function(b){if(!b.$modelValue)return null;a.$nodesMap[b.$modelValue.$$hashKey]=b},this.destroySubNode=function(b){if(!b.$modelValue)return null;a.$nodesMap[b.$modelValue.$$hashKey]=null},a.isParent=function(c){return b.equals(c.$parentNodesScope,a)},a.hasChild=function(){return a.$modelValue.length>0},a.noRootChildren=function(b){var c=a.$treeScope.model.indexOf(b.$modelValue);if(c>-1){return 0===a.$treeScope.model[c].nodes.length}return!1},a.safeApply=function(a){var b=this.$root.$$phase;"$apply"===b||"$digest"===b?a&&"function"==typeof a&&a():this.$apply(a)},a.removeNode=function(b){var c=a.$modelValue.indexOf(b.$modelValue);return c>-1?(a.safeApply(function(){a.$modelValue.splice(c,1)[0]}),b):null},a.insertNode=function(b,c){a.safeApply(function(){a.$modelValue.splice(b,0,c)})},a.childNodes=function(){var b,c=[];if(a.$modelValue)for(b=0;b<a.$modelValue.length;b++)c.push(a.$nodesMap[a.$modelValue[b].$$hashKey]);return c},a.depth=function(){return a.$nodeScope?a.$nodeScope.depth():0},a.outOfDepth=function(b){var c=a.$treeScope.$options.maxDepth;return c>0&&a.depth()+b.maxSubDepth()+1>c},a.dragoverCallback=function(b,c,d,e){if(a.$treeScope.$callbacks.dragoverAction(b,e)){var f=document.getElementsByClassName("dndPlaceholder")[0],g=b.target.id.replace(/\-div|\-input|\-span|\-ol|\-button\-div?/,"-li"),h=document.getElementById(g),i=-1!==h.getElementsByTagName("ol")[0].className.indexOf("collapse"),j=h.getElementsByClassName("tree-node-content"),k=j[0],l=j[1],m=-9999,n=-9999,o=5;return"DIV"===b.target.nodeName||"INPUT"===b.target.nodeName?l&&!i?(m=l.offsetTop-o,n=l.offsetLeft):(m=k.offsetTop+k.offsetHeight+o,n=k.offsetLeft):"LI"===b.target.nodeName&&(m=k.offsetTop-o,n=k.offsetLeft-o),f.style.top=m+"px",f.style.left=n+"px",!0}return!1}}var g=b.module("TT-UI.HierarchyTree.Controllers.HierarchyTreeController",[]);d.$inject=["$scope"],g.controller("HierarchyTreeController",d);var g=b.module("TT-UI.HierarchyTree.Controllers.HierarchyTreeNodeController",[]);e.$inject=["$scope","$element","$timeout"],g.controller("HierarchyTreeNodeController",e);var g=b.module("TT-UI.HierarchyTree.Controllers.HierarchyTreeNodesController",[]);f.$inject=["$scope"],g.controller("HierarchyTreeNodesController",f);var g=b.module("TT-UI.HierarchyTree.Directives.HierarchyTreeContainer",[]);g.directive("hierarchyTreeContainer",["hierarchyTreeConfig",function(a){return{restrict:"E",require:["^hierarchyTree"],scope:!1,transclude:!0,templateUrl:a.templatePath+"ht-container.tpl.html",link:function(c,d,e,f){var g={};b.extend(g,a),b.extend(g,f[0].scope.options),c.recursionTemplate=g.templatePath+f[0].scope.recursionTemplate,c.model=f[0].scope.model}}}]);var g=b.module("TT-UI.HierarchyTree.Directives.HierarchyTreeFilter",[]);g.directive("hierarchyTreeFilter",[function(){return{restrict:"E",require:["^hierarchyTree"],scope:{placeholder:"@",filter:"=?"},transclude:!1,template:'<input type="text" class="form-control" placeholder="{{placeholder}}" ng-model="filter" ng-change="find();"><hr>',link:function(a,b,c,d){a.find=function(){d[0].scope.$treeFilter=a.filter}}}}]);var g=b.module("TT-UI.HierarchyTree.Directives.HierarchyTreeNode",[]);g.directive("hierarchyTreeNode",[function(){return{require:["^hierarchyTreeNodes","^hierarchyTree"],restrict:"A",controller:"HierarchyTreeNodeController",link:function(a,b,c,d){a.init(d)}}}]);var g=b.module("TT-UI.HierarchyTree.Directives.HierarchyTreeNodes",[]);g.directive("hierarchyTreeNodes",[function(){return{require:["ngModel","?^hierarchyTreeNode","^hierarchyTree"],restrict:"EA",scope:!0,controller:"HierarchyTreeNodesController",link:function(a,c,d,e){var f=e[0],g=e[1],h=e[2];g?(g.scope.$childNodesScope=a,a.$nodeScope=g.scope):h.scope.$nodesScope=a,a.$treeScope=h.scope,f&&(f.$render=function(){b.isArray(f.$modelValue)||(a.$modelValue=[]),a.$modelValue=f.$modelValue})}}}]);var g=b.module("TT-UI.HierarchyTree.Directives.HierarchyTreeContainerRootNode",[]);g.directive("hierarchyTreeContainerRootNode",[function(){return{restrict:"E",scope:!1,transclude:!0,template:'<div hierarchy-tree-node class="root-node" ng-class="{\'selected\': selected}"><span ng-mouseover="iconHover(true);" ng-mouseleave="iconHover(false)" ng-click="selectItem();" class="glyphicon glyphicon-ttui" ng-class="{\'glyphicon-chevron-circle-down\': !iconHovered, \'glyphicon-chevron-circle-down-black\': iconHovered}"></span><span ng-click="selectItem();" ng-class="{\'hover\': hovered}" ng-mouseover="hover(true);" ng-mouseleave="hover(false);"><ng-transclude></ng-transclude></span></div>'}}]);var g=b.module("TT-UI.HierarchyTree.Directives.HierarchyTree",[]);g.directive("hierarchyTree",["hierarchyTreeConfig",function(a){return{restrict:"E",controller:"HierarchyTreeController",scope:{recursionTemplate:"@",model:"=",options:"=?"},link:function(c,d,e){c.$callbacks=null;var f={removedAction:null,selectedAction:null,rootSelectedAction:null,newSubItemAction:null,footerButtonAction:null,dragoverAction:null},g={};b.extend(g,a),b.extend(g,c.options),c.$options=g,f.removedAction=function(a){return a},f.selectedAction=function(a){return a},f.rootSelectedAction=function(a){return a},f.newSubItemAction=function(a,b){if(a.$modelValue&&a.maxDepth()){var c=a.$modelValue;c.nodes.push({id:10*c.id+c.nodes.length,title:c.title+"."+(c.nodes.length+1),nodes:[]})}else{var d=a.$parentNodesScope.$modelValue,e=d.length+1;d.push({id:e,title:"Node"+e,nodes:[]})}},f.footerButtonAction=function(a){null},f.dragoverAction=function(a,b){if(""===a.target.id||"profile"===b)return!1;var c=a.target.id.substring(a.target.id.lastIndexOf("-")+1);if("LI"===a.target.nodeName){var d=a.target.parentElement.id;c=d.substring(d.lastIndexOf("-")+1)}return!("profile"!==c&&"subProfile"!==c||"subProfile"!==b&&"billingAccount"!==b)||"billingAccount"===c&&"offering"===b},c.$watch(e.options,function(a){b.forEach(a,function(a,b){f[b]&&"function"==typeof a&&(f[b]=a)}),c.$callbacks=f},!0)}}}]),b.module("TT-UI.HierarchyTree.Config",[]).constant("hierarchyTreeConfig",{showRoot:!1,readonly:!0,selectPrevious:!1,maxDepth:0,templatePath:"scripts/hierarchy-tree/views/directives/"}),b.module("TT-UI.HierarchyTree",["ui.bootstrap.collapse","ngAnimate","dndLists","TT-UI.HierarchyTree.Config","TT-UI.HierarchyTree.Controllers.HierarchyTreeController","TT-UI.HierarchyTree.Controllers.HierarchyTreeNodesController","TT-UI.HierarchyTree.Controllers.HierarchyTreeNodeController","TT-UI.HierarchyTree.Directives.HierarchyTreeContainer","TT-UI.HierarchyTree.Directives.HierarchyTreeNodes","TT-UI.HierarchyTree.Directives.HierarchyTreeNode","TT-UI.HierarchyTree.Directives.HierarchyTreeContainerRootNode","TT-UI.HierarchyTree.Directives.HierarchyTreeFilter","TT-UI.HierarchyTree.Directives.HierarchyTree"])}(window,window.angular);
//# sourceMappingURL=ttui-hierarchy-tree.min.js.map